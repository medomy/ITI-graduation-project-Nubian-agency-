{"ast":null,"code":"import _asyncToGenerator from \"/home/dev/Development/src/untitled folder/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators, VERSION } from '@angular/forms';\nimport { HttpResponse, HttpEventType } from '@angular/common/http';\nlet AdminArtistUpdateComponent = class AdminArtistUpdateComponent {\n  constructor(http, uploadService, categoriesService, artistService, router, route, toastService) {\n    var _this = this;\n\n    this.http = http;\n    this.uploadService = uploadService;\n    this.categoriesService = categoriesService;\n    this.artistService = artistService;\n    this.router = router;\n    this.route = route;\n    this.toastService = toastService;\n    this.uploadSuccess = false;\n    this.addSuccess = false;\n    this.aristForm = new FormGroup({\n      name: new FormControl('', [Validators.required, Validators.minLength(3)]),\n      email: new FormControl('', [Validators.required, Validators.email]),\n      country: new FormControl('', [Validators.required, Validators.minLength(3)]),\n      gender: new FormControl('', Validators.required),\n      date: new FormControl('', Validators.required),\n      department: new FormControl('', Validators.required),\n      avatar: new FormControl('')\n    });\n    this.version = VERSION;\n    this.router.params.subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (param) {\n        yield _this.artistService.getOneArtist(param.id).subscribe( /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator(function* (data) {\n            yield _this.categoriesService.getOneCategory(data.department).subscribe( /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator(function* (data2) {\n                _this.currentCategeory = yield data2;\n              });\n\n              return function (_x3) {\n                return _ref3.apply(this, arguments);\n              };\n            }());\n            _this.currentArtist = yield data; // console.log(data);\n          });\n\n          return function (_x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }());\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    this.categeories = this.categoriesService.getcategoriess().subscribe( /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator(function* (data) {\n        _this.categeories = yield data;\n      });\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n  }\n\n  get name() {\n    return this.aristForm.get('name');\n  }\n\n  get email() {\n    return this.aristForm.get('email');\n  }\n\n  get country() {\n    return this.aristForm.get('country');\n  }\n\n  get gender() {\n    return this.aristForm.get('gender');\n  }\n\n  get date() {\n    return this.aristForm.get('date');\n  }\n\n  get department() {\n    return this.aristForm.get('department');\n  }\n\n  updateArtist() {\n    console.log(this.aristForm);\n\n    if (!this.selectedFiles && this.aristForm.valid) {\n      this.artistService.updateArtist(this.currentArtist.id, {\n        name: this.name.value,\n        dateOfBirth: this.date.value,\n        country: this.country.value,\n        email: this.email.value,\n        gender: this.gender.value,\n        department: this.department.value,\n        TimeStamp: {\n          updatedAt: new Date().toDateString()\n        }\n      }).then(() => {\n        this.addSuccess = true;\n        setTimeout(() => {\n          this.route.navigate(['/admin/artists']);\n        }, 500);\n      });\n    } else if (this.selectedFiles) {\n      this.uploadService.upload('images/arists', this.selectedFiles[0].name, this.selectedFiles[0]).then(data => {\n        if (data && this.selectedFiles && this.uploadSuccess && this.aristForm.valid) {\n          this.artistService.updateArtist(this.currentArtist.id, {\n            name: this.name.value,\n            dateOfBirth: this.date.value,\n            country: this.country.value,\n            email: this.email.value,\n            gender: this.gender.value,\n            department: this.department.value,\n            avatar: data,\n            TimeStamp: {\n              updatedAt: new Date().toDateString()\n            }\n          }).then(() => {\n            this.addSuccess = true;\n            setTimeout(() => {\n              this.route.navigate(['/admin/artists']);\n            }, 500);\n          });\n        }\n      });\n    }\n  }\n\n  upload(files) {\n    this.uploadAndProgress(files);\n    this.selectedFiles = files;\n  }\n\n  uploadAndProgress(files) {\n    var formData = new FormData();\n    Array.from(files).forEach(f => formData.append('file', f));\n    this.http.post('https://file.io', formData, {\n      reportProgress: true,\n      observe: 'events'\n    }).subscribe(event => {\n      if (event.type === HttpEventType.UploadProgress) {\n        this.percentDone = Math.round(100 * event.loaded / event.total);\n        console.log(files);\n      } else if (event instanceof HttpResponse) {\n        this.uploadSuccess = true;\n      }\n    });\n  }\n\n  ngOnInit() {}\n\n  showSuccess() {\n    this.toastService.show('update success wait..', {\n      classname: 'bg-success text-light',\n      delay: 1000\n    });\n  }\n\n};\nAdminArtistUpdateComponent = __decorate([Component({\n  selector: 'app-admin-artist-update',\n  templateUrl: './admin-artist-update.component.html',\n  styleUrls: ['./admin-artist-update.component.css']\n})], AdminArtistUpdateComponent);\nexport { AdminArtistUpdateComponent };","map":{"version":3,"sources":["/home/dev/Development/src/untitled folder/dashboard/src/app/components/admin-artist/admin-artist-update/admin-artist-update.component.ts"],"names":["__decorate","Component","FormControl","FormGroup","Validators","VERSION","HttpResponse","HttpEventType","AdminArtistUpdateComponent","constructor","http","uploadService","categoriesService","artistService","router","route","toastService","uploadSuccess","addSuccess","aristForm","name","required","minLength","email","country","gender","date","department","avatar","version","params","subscribe","param","getOneArtist","id","data","getOneCategory","data2","currentCategeory","currentArtist","categeories","getcategoriess","get","updateArtist","console","log","selectedFiles","valid","value","dateOfBirth","TimeStamp","updatedAt","Date","toDateString","then","setTimeout","navigate","upload","files","uploadAndProgress","formData","FormData","Array","from","forEach","f","append","post","reportProgress","observe","event","type","UploadProgress","percentDone","Math","round","loaded","total","ngOnInit","showSuccess","show","classname","delay","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators, VERSION } from '@angular/forms';\nimport { HttpResponse, HttpEventType } from '@angular/common/http';\nlet AdminArtistUpdateComponent = class AdminArtistUpdateComponent {\n    constructor(http, uploadService, categoriesService, artistService, router, route, toastService) {\n        this.http = http;\n        this.uploadService = uploadService;\n        this.categoriesService = categoriesService;\n        this.artistService = artistService;\n        this.router = router;\n        this.route = route;\n        this.toastService = toastService;\n        this.uploadSuccess = false;\n        this.addSuccess = false;\n        this.aristForm = new FormGroup({\n            name: new FormControl('', [Validators.required, Validators.minLength(3)]),\n            email: new FormControl('', [Validators.required, Validators.email]),\n            country: new FormControl('', [\n                Validators.required,\n                Validators.minLength(3),\n            ]),\n            gender: new FormControl('', Validators.required),\n            date: new FormControl('', Validators.required),\n            department: new FormControl('', Validators.required),\n            avatar: new FormControl(''),\n        });\n        this.version = VERSION;\n        this.router.params.subscribe(async (param) => {\n            await this.artistService\n                .getOneArtist(param.id)\n                .subscribe(async (data) => {\n                await this.categoriesService\n                    .getOneCategory(data.department)\n                    .subscribe(async (data2) => {\n                    this.currentCategeory = await data2;\n                });\n                this.currentArtist = await data;\n                // console.log(data);\n            });\n        });\n        this.categeories = this.categoriesService\n            .getcategoriess()\n            .subscribe(async (data) => {\n            this.categeories = await data;\n        });\n    }\n    get name() {\n        return this.aristForm.get('name');\n    }\n    get email() {\n        return this.aristForm.get('email');\n    }\n    get country() {\n        return this.aristForm.get('country');\n    }\n    get gender() {\n        return this.aristForm.get('gender');\n    }\n    get date() {\n        return this.aristForm.get('date');\n    }\n    get department() {\n        return this.aristForm.get('department');\n    }\n    updateArtist() {\n        console.log(this.aristForm);\n        if (!this.selectedFiles && this.aristForm.valid) {\n            this.artistService\n                .updateArtist(this.currentArtist.id, {\n                name: this.name.value,\n                dateOfBirth: this.date.value,\n                country: this.country.value,\n                email: this.email.value,\n                gender: this.gender.value,\n                department: this.department.value,\n                TimeStamp: {\n                    updatedAt: new Date().toDateString(),\n                },\n            })\n                .then(() => {\n                this.addSuccess = true;\n                setTimeout(() => {\n                    this.route.navigate(['/admin/artists']);\n                }, 500);\n            });\n        }\n        else if (this.selectedFiles) {\n            this.uploadService\n                .upload('images/arists', this.selectedFiles[0].name, this.selectedFiles[0])\n                .then((data) => {\n                if (data &&\n                    this.selectedFiles &&\n                    this.uploadSuccess &&\n                    this.aristForm.valid) {\n                    this.artistService\n                        .updateArtist(this.currentArtist.id, {\n                        name: this.name.value,\n                        dateOfBirth: this.date.value,\n                        country: this.country.value,\n                        email: this.email.value,\n                        gender: this.gender.value,\n                        department: this.department.value,\n                        avatar: data,\n                        TimeStamp: {\n                            updatedAt: new Date().toDateString(),\n                        },\n                    })\n                        .then(() => {\n                        this.addSuccess = true;\n                        setTimeout(() => {\n                            this.route.navigate(['/admin/artists']);\n                        }, 500);\n                    });\n                }\n            });\n        }\n    }\n    upload(files) {\n        this.uploadAndProgress(files);\n        this.selectedFiles = files;\n    }\n    uploadAndProgress(files) {\n        var formData = new FormData();\n        Array.from(files).forEach((f) => formData.append('file', f));\n        this.http\n            .post('https://file.io', formData, {\n            reportProgress: true,\n            observe: 'events',\n        })\n            .subscribe((event) => {\n            if (event.type === HttpEventType.UploadProgress) {\n                this.percentDone = Math.round((100 * event.loaded) / event.total);\n                console.log(files);\n            }\n            else if (event instanceof HttpResponse) {\n                this.uploadSuccess = true;\n            }\n        });\n    }\n    ngOnInit() { }\n    showSuccess() {\n        this.toastService.show('update success wait..', {\n            classname: 'bg-success text-light',\n            delay: 1000,\n        });\n    }\n};\nAdminArtistUpdateComponent = __decorate([\n    Component({\n        selector: 'app-admin-artist-update',\n        templateUrl: './admin-artist-update.component.html',\n        styleUrls: ['./admin-artist-update.component.css'],\n    })\n], AdminArtistUpdateComponent);\nexport { AdminArtistUpdateComponent };\n"]},"metadata":{},"sourceType":"module"}