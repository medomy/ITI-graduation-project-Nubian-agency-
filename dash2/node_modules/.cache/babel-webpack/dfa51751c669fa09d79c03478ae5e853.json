{"ast":null,"code":"import _asyncToGenerator from \"/home/dev/Development/src/Nubian-Agancy/Client-Side/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { collection, collectionData, getDocs, query, where } from '@angular/fire/firestore';\nimport { deleteDoc, doc, setDoc } from '@firebase/firestore';\nimport { docData } from 'rxfire/firestore';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/firestore\";\nimport * as i2 from \"../auth/auth.service\";\nexport class OrderService {\n  constructor(firestore, authService) {\n    this.firestore = firestore;\n    this.authService = authService;\n  }\n\n  get user() {\n    return this.authService.getuserLocal;\n  } //getAll\n\n\n  getOrders() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      //let data = collection(this.firestore, \"order\");\n      let Orders = [];\n      const querySnapshot = yield getDocs(collection(_this.firestore, 'order'));\n      querySnapshot.forEach(docu => {\n        Orders.push(Object.assign(Object.assign({}, docu.data()), {\n          id: docu.id\n        }));\n      });\n      return Orders; //return collectionData(data);\n    })();\n  }\n  /*getOrders() {\n  let data = collection(this.firestore, \"order\");\n  const Orders = [];\n  onSnapshot(data, (querySnapshot) => {\n       querySnapshot.forEach((doc) => {\n      Orders.push({ ...doc.data(), id: doc.id })\n    });\n     });\n  return Orders\n   }*/\n\n\n  getOrdersForUser() {\n    const data = query(collection(this.firestore, 'order'), where('userId', '==', this.user.uid));\n    return collectionData(data);\n  } //get by id\n\n\n  getOneOrder(id) {\n    let oneOrder = doc(this.firestore, 'order', id);\n    return docData(oneOrder);\n  } //add\n\n\n  addOrder(order) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const neworder = yield doc(collection(_this2.firestore, 'order'));\n      setDoc(neworder, Object.assign(Object.assign({}, order), {\n        id: neworder.id\n      }));\n    })();\n  } //update\n\n\n  updateOrder(Id, newProp) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      yield setDoc(doc(collection(_this3.firestore, 'order', Id)), newProp, {\n        merge: true\n      });\n    })();\n  } //remove\n\n\n  removeOrder(Id) {\n    deleteDoc(doc(this.firestore, 'order', Id));\n  }\n\n}\n\nOrderService.ɵfac = function OrderService_Factory(t) {\n  return new (t || OrderService)(i0.ɵɵinject(i1.Firestore), i0.ɵɵinject(i2.AuthService));\n};\n\nOrderService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: OrderService,\n  factory: OrderService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["/home/dev/Development/src/Nubian-Agancy/Client-Side/dashboard/src/app/core/services/Order/order.service.ts"],"names":["collection","collectionData","getDocs","query","where","deleteDoc","doc","setDoc","docData","i0","i1","i2","OrderService","constructor","firestore","authService","user","getuserLocal","getOrders","Orders","querySnapshot","forEach","docu","push","Object","assign","data","id","getOrdersForUser","uid","getOneOrder","oneOrder","addOrder","order","neworder","updateOrder","Id","newProp","merge","removeOrder","ɵfac","OrderService_Factory","t","ɵɵinject","Firestore","AuthService","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import { collection, collectionData, getDocs, query, where, } from '@angular/fire/firestore';\nimport { deleteDoc, doc, setDoc } from '@firebase/firestore';\nimport { docData } from 'rxfire/firestore';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/firestore\";\nimport * as i2 from \"../auth/auth.service\";\nexport class OrderService {\n    constructor(firestore, authService) {\n        this.firestore = firestore;\n        this.authService = authService;\n    }\n    get user() {\n        return this.authService.getuserLocal;\n    }\n    //getAll\n    async getOrders() {\n        //let data = collection(this.firestore, \"order\");\n        let Orders = [];\n        const querySnapshot = await getDocs(collection(this.firestore, 'order'));\n        querySnapshot.forEach((docu) => {\n            Orders.push(Object.assign(Object.assign({}, docu.data()), { id: docu.id }));\n        });\n        return Orders;\n        //return collectionData(data);\n    }\n    /*getOrders() {\n    let data = collection(this.firestore, \"order\");\n    const Orders = [];\n    onSnapshot(data, (querySnapshot) => {\n  \n      querySnapshot.forEach((doc) => {\n        Orders.push({ ...doc.data(), id: doc.id })\n      });\n  \n    });\n    return Orders\n  \n  }*/\n    getOrdersForUser() {\n        const data = query(collection(this.firestore, 'order'), where('userId', '==', this.user.uid));\n        return collectionData(data);\n    }\n    //get by id\n    getOneOrder(id) {\n        let oneOrder = doc(this.firestore, 'order', id);\n        return docData(oneOrder);\n    }\n    //add\n    async addOrder(order) {\n        const neworder = await doc(collection(this.firestore, 'order'));\n        setDoc(neworder, Object.assign(Object.assign({}, order), { id: neworder.id }));\n    }\n    //update\n    async updateOrder(Id, newProp) {\n        await setDoc(doc(collection(this.firestore, 'order', Id)), newProp, {\n            merge: true,\n        });\n    }\n    //remove\n    removeOrder(Id) {\n        deleteDoc(doc(this.firestore, 'order', Id));\n    }\n}\nOrderService.ɵfac = function OrderService_Factory(t) { return new (t || OrderService)(i0.ɵɵinject(i1.Firestore), i0.ɵɵinject(i2.AuthService)); };\nOrderService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: OrderService, factory: OrderService.ɵfac, providedIn: 'root' });\n"]},"metadata":{},"sourceType":"module"}